<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Prophere{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    {% block styles %}{% endblock %}
</head>

<body>
    {% block content %}{% endblock %}

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- JavaScript Modules -->
    <script src="{{ url_for('static', filename='js/notifications.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modals.js') }}"></script>
    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // Convert flash messages to toast notifications
        document.addEventListener('DOMContentLoaded', function () {
            const flashMessages = document.querySelectorAll('.flash-messages .flash');
            flashMessages.forEach(function (flash) {
                const category = flash.classList.contains('success') ? 'success' :
                    flash.classList.contains('error') ? 'error' :
                        flash.classList.contains('warning') ? 'warning' : 'info';
                const message = flash.textContent.trim();

                // Show as toast
                if (typeof notificationSystem !== 'undefined') {
                    notificationSystem.show(message, category);
                }

                // Hide the original flash message
                flash.style.display = 'none';
            });
        });
    </script>

    {% block scripts %} {% endblock %}
</body>

</html>